
var Nanobar=(function(){'use strict';var addCss,animation,transEvent,createBar,Nanobar,css='.nanobar{float:left;width:100%;height:4px;z-index:9999;}.nanobarbar{width:0;height:100%;float:left;transition:all .3s;}',head=document.head||document.getElementsByTagName('head')[0];var ie=(function(){var undef,v=3,div=document.createElement('div'),all=div.getElementsByTagName('i');while(div.innerHTML='<!--[if gt IE '+(++v)+']><i></i><![endif]-->',all[0]);return v>4?v:undef;}());addCss=function(){var s=document.getElementById('nanobar-style');if(s===null){s=document.createElement('style');s.type='text/css';s.id='nanobar-style';head.insertBefore(s,head.firstChild);if(s.styleSheet){s.styleSheet.cssText=css;}else{s.appendChild(document.createTextNode(css));}}}
animation=function(){var el=document.createElement('fakeelement'),transitions={'transition':'transitionend','OTransition':'oTransitionEnd','MozTransition':'transitionend','WebkitTransition':'webkitTransitionEnd'},t;for(t in transitions){if(el.style[t]!==undefined){return transitions[t];}}};transEvent=animation();createBar=function(cont){var bar=document.createElement('div');bar.setAttribute('class','nanobarbar');bar.style.background=cont.opts.bg;bar.setAttribute('on','1');cont.cont.appendChild(bar);transEvent&&bar.addEventListener(transEvent,function(){if(bar.style.width==='100%'&&bar.getAttribute('on')==='1'){bar.setAttribute('on',0);cont.bars.pop();bar.style.height=0;setTimeout(function(){cont.cont.removeChild(bar);},300);}});return bar;}
Nanobar=function(opt){var opts=this.opts=opt||{},cont;opts.bg=opts.bg||'#000';this.bars=[];addCss();cont=this.cont=document.createElement('div');cont.setAttribute('class','nanobar');if(opts.id){cont.id=opts.id;}
if(!opts.target){cont.style.position='fixed';cont.style.top='0';}else{cont.style.position='relative';}
if(!opts.target){document.getElementsByTagName('body')[0].appendChild(cont);}else{opts.target.insertBefore(cont,opts.target.firstChild);}
return this.init();};Nanobar.prototype.init=function(){var bar=createBar(this);this.bars.unshift(bar);};Nanobar.prototype.go=function(p){this.bars[0].style.width=p+'%';if(p==100){if(ie!=undefined){this.bars[0].style.height=0;}
this.init();}};return Nanobar;})();module.exports=Nanobar;